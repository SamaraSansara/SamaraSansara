# ДЗ-1. Вариант 29. Студент - Уджуху Вероника

## Постановка задачи: 
<img width="652" alt="Screenshot 2024-12-08 at 19 42 08" src="https://github.com/user-attachments/assets/a0932841-5b9b-494a-bd50-34982a75cf46">



## Библиотеки, созданные в коде:

1)argparse: Модуль для обработки аргументов командной строки. Используется для передачи данных вроде имени пользователя, пути к файловой системе и стартового скрипта.

2)tarfile: Модуль для работы с .tar-архивами. Предоставляет функционал для извлечения, проверки наличия и обработки файлов внутри архива.

3)os: Модуль для работы с операционной системой: позволяет управлять путями, файлами, директориями.

4)tkinter и tkinter.scrolledtext: Библиотека для создания графического интерфейса Python-приложений.

5)ScrolledText: виджет с текстом и полосой прокрутки.
Entry: поле ввода для команд.
6)Tk: объект главного окна.
sys: Модуль системных операций, используемый для завершения программы.

7)time и datetime
8)time: Для работы с временем, в частности отсчета времени работы эмулятора.
9)datetime: Для управления временными метками и формирования человеко-читаемых дат.

## Функции, созданные в коде:

### Файл: emulator.py - Основной файл для запуска программы.

1)Функция parse_args(): Использует argparse.ArgumentParser для обработки входных аргументов:
1. username — имя пользователя.
2. fs_archive — путь к tar-архиву.
3. start_script — путь к скрипту, который будет выполнен в эмуляторе.

2)Функция main(): 
1. Парсит входные аргументы (parse_args).
2. Создает экземпляр VirtualFileSystem.
3. Запускает графический интерфейс (run_gui).



### Файл: fs_handler.py - Модуль для обработки файловой системы в tar-архиве.

Класс VirtualFileSystem - Имитация виртуальной файловой системы на основе .tar архива.

Инициализация (__init__): Сохраняет путь к архиву (self.tar_path).

Методы: 
1) list_files(): Возвращает список всех файлов и папок в архиве.
Использует:
```
with tarfile.open(self.tar_path, 'r') as tar:
    return tar.getnames()  # Возвращает имена файлов/папок

```
2) open_file(filename): Читает содержимое файла в архиве, декодирует его (UTF-16). Если файл отсутствует — возвращает сообщение об ошибке.
3) check_file(filename): Проверяет существование файла по имени внутри архива.


### Файл: gui.py - Графический интерфейс эмулятора.

Класс ShellGUI: Создает графический интерфейс с текстовым выводом и полем для ввода команд.


Методы:

1)__init__(shell):
1.  Инициализирует главный интерфейс.
2. Создает текстовое окно вывода и поле ввода команд.
3. Можно выполнить стартовый скрипт через self.shell.execute_script (если не закомментировано).

2)process_command(event): 
1. Вызывается при нажатии Enter.
2. Получает команду из поля ввода.
3. Выполняет команду через self.shell.execute_command.
4. Выводит результат в интерфейс.

   
3)add_output(text): Добавляет текст в область вывода (text_output).

2)clear_output(): Очищает текстовый вывод.

3)start(): Запускает GUI (главный цикл Tkinter).

4)Функция run_gui(username, fs, fs_archive, start_script): Инициализирует ShellEmulator и ShellGUI, затем запускает GUI.


### Файл: shell.py - Файл с реализацией команд для эмулятора.

Класс ShellEmulator: Основная логика оболочки эмулятора.

Поля класса:
username — имя пользователя для создания промпта.
fs — объект файловой системы (VirtualFileSystem).
current_dir — текущая директория.
virtual_files — виртуальные файлы (создаваемые пользователем, но не хранящиеся в архивах).
file_timestamps — временные метки виртуальных файлов.
fs_path и script_path — пути к архиву и скрипту.
start_time — время старта эмулятора.
Методы:

1)prompt():
Возвращает промпт для текущей сессии. Пример:
```
user@emulator:/current/directory$ 
```

2)execute_command(command): Выполняет команды оболочки, такие как:
ls, cd, uniq, tree, uptime, exit.

3)ls(): Список файлов и папок текущей директории. Учитывает виртуальные файлы и реальную файловую систему.

4)cd(directory): Переход между директориями:
/ — в корневую директорию.
.. — в родительскую директорию.
{directory} — переход в указанную директорию. Проверяет, существует ли она в архиве.

5)uniq(filename): Удаляет дублирующиеся строки в указанном файле и возвращает результат.

6)tree(path, indent, prefix): Рекурсивно выводит дерево файлов и папок для текущей директории или заданного пути. Использует символы:

```
├─ file  
└─ folder  
│   ├─ sub_file
```

7)uptime(): Выводит время работы эмулятора, дату запуска, текущее время.

8)exit(): Завершает программу с помощью sys.exit(0).

9)execute_script(gui_output_callback): Выполняет команды из стартового скрипта.
Вывод передается в консоль или в GUI (через gui_output_callback).


## Сборка проекта:

Сборка проекта осуществляется через командную строку, так как написан на питоне
```
python3 emulator.py username test_fs.tar start.sh
```

## Результат программы:
<img width="1149" alt="Screenshot 2024-12-14 at 14 58 57" src="https://github.com/user-attachments/assets/a1e6cb0d-0daf-4da1-b83f-e9932e736fcd" />


